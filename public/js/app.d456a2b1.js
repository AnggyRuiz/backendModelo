(function(e){function t(t){for(var r,a,s=t[0],u=t[1],i=t[2],d=0,b=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&b.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(b.length)b.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},c=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var l=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},5134:function(e,t,n){"use strict";n("e187")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o=Object(r["h"])("div",{id:"nav"},null,-1);function c(e,t,n,c,a,s){var u=Object(r["z"])("router-view");return Object(r["s"])(),Object(r["g"])(r["a"],null,[o,Object(r["i"])(u)],64)}var a=n("5530"),s=n("5502"),u={methods:Object(a["a"])({},Object(s["b"])(["getToken","logOut"])),created:function(){this.getToken()}};n("efd4");u.render=c;var i=u,l=n("6c02");function d(e,t,n,o,c,a){var s=Object(r["z"])("login");return Object(r["s"])(),Object(r["g"])("div",null,[Object(r["i"])(s)])}Object(r["v"])("data-v-36824cc9");var b={class:"vh-100"},p={class:"container h-100"},f={class:"row d-flex justify-content-center align-items-center h-100"},h={class:"col-12 col-md-8 col-lg-6 col-xl-5"},m={class:"card shadow-2-strong",style:{"border-radius":"1rem"}},O={class:"card-body p-5 text-center"},j=Object(r["h"])("h3",{class:"mb-5"},"Sign in",-1),v={class:"form-outline mb-4"},g={class:"form-outline mb-4"},k=Object(r["h"])("button",{class:"btn btn-primary btn-lg btn-block",type:"submit"}," Login ",-1);function w(e,t,n,o,c,a){var s=Object(r["z"])("loading");return Object(r["s"])(),Object(r["g"])("div",null,[Object(r["h"])("section",b,[Object(r["h"])("div",p,[Object(r["h"])("div",f,[Object(r["h"])("div",h,[Object(r["h"])("div",m,[Object(r["h"])("div",O,[j,Object(r["h"])("form",{onSubmit:t[2]||(t[2]=Object(r["G"])((function(e){return a.loginUser(c.user)}),["prevent"]))},[Object(r["h"])("div",v,[Object(r["F"])(Object(r["h"])("input",{type:"email",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.user.email=e}),id:"typeEmailX",class:"form-control form-control-lg"},null,512),[[r["C"],c.user.email]])]),Object(r["h"])("div",g,[Object(r["F"])(Object(r["h"])("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.user.password=e}),id:"typePasswordX",class:"form-control form-control-lg"},null,512),[[r["C"],c.user.password]])]),k],32)])])])])]),Object(r["h"])("div",null,[Object(r["i"])(s,{show:c.show,label:c.label},null,8,["show","label"])])])])}Object(r["t"])();var y=n("1da1"),x=(n("96cf"),n("755b")),T=n.n(x),U={data:function(){return{user:{email:"",password:""},show:!1,label:"Loading...",timeOut:2e3,overlay:!0}},components:{loading:T.a},methods:Object(a["a"])(Object(a["a"])({},Object(s["b"])(["login"])),{},{loginUser:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.showMe(),n.next=3,t.login(e).then((function(e){console.log(e)})).catch((function(e){console.error(e)}));case 3:case"end":return n.stop()}}),n)})))()},showMe:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.user?(e.show=!0,setTimeout((function(){e.show=!1}),e.timeOut)):console.log("entra");case 1:case"end":return t.stop()}}),t)})))()}})};n("5134");U.render=w,U.__scopeId="data-v-36824cc9";var S=U,P={data:function(){return{user:{email:"",password:""}}},methods:Object(a["a"])({},Object(s["b"])(["login"])),components:{Login:S}};P.render=d;var R=P,_={class:"about"},C={class:"d-flex justify-content-end m-3"};function M(e,t,n,o,c,a){return Object(r["s"])(),Object(r["g"])("div",_,[Object(r["h"])("div",C,[Object(r["h"])("button",{onClick:t[0]||(t[0]=function(){return e.logOut&&e.logOut.apply(e,arguments)}),type:"button",class:"btn btn-primary btn-sm"}," Cerrar sesiÃ³n ")])])}n("d3b7");var I={data:function(){return{user:null}},computed:Object(a["a"])({},Object(s["c"])(["token","kUser"])),methods:Object(a["a"])(Object(a["a"])({},Object(s["b"])(["logOut","setUser"])),{},{protectedData:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://backendmodelo.herokuapp.com/api/dashboard",{headers:{"Content-Type":"application/json","auth-token":e.token}});case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,console.log(r),e.setUser(r.data.user),e.user=e.kUser,console.log(e.kUser),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()}}),created:function(){this.protectedData()}};I.render=M;var z=I,E=Object(s["a"])({state:{token:null,kUser:null},mutations:{setToken:function(e,t){e.token=t},setUser:function(e,t){e.kUser=t}},actions:{login:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,console.log(t),n.prev=2,n.next=5,fetch("https://backendmodelo.herokuapp.com/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 5:return o=n.sent,n.next=8,o.json();case 8:return c=n.sent,console.log(c.data.token),r("setToken",c.data.token),localStorage.setItem("idToken",c.data.token),D.push("/about"),n.abrupt("return",c);case 16:n.prev=16,n.t0=n["catch"](2),console.log(n.t0);case 19:case"end":return n.stop()}}),n,null,[[2,16]])})))()},getToken:function(e){var t=e.commit;localStorage.getItem("idToken")?t("setToken",localStorage.getItem("idToken")):t("setToken",null)},logOut:function(e){var t=e.commit;localStorage.removeItem("idToken"),t("setToken",null),t("setUser",null),D.push("/")},setUser:function(e,t){var n=e.commit;n("setUser",t)}},modules:{}}),J=[{path:"/",name:"Home",component:R},{path:"/about",name:"About",component:z,meta:{protectedRoute:!0}}],L=Object(l["a"])({history:Object(l["b"])("/"),routes:J});L.beforeEach((function(e,t,n){var r=e.matched.some((function(e){return e.meta.protectedRoute}));r&&null===E.state.token?n("/"):n()}));var D=L;Object(r["d"])(i).use(E).use(D).mount("#app")},"8c6d":function(e,t,n){},e187:function(e,t,n){},efd4:function(e,t,n){"use strict";n("8c6d")}});
//# sourceMappingURL=app.d456a2b1.js.map